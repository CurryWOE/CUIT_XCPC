# 对顶堆(Two heaps)
1. 一个大根堆与一个小根堆组成
2. 小根堆维护前k大
3. 大根堆维护其他数
## 外部行为
对顶堆不是一个具体的堆，可以由其他堆实现对顶堆，其他堆的时间复杂度会影响对顶堆堆时间复杂度，这里以二叉堆为例

在线，$O(log n)$ 插入

如果K固定，$O(1)$ 查询第K大

如果K变化，设相邻两次K的差值为Dif，则 $O(Dif * log n)$ 查询第K大

如果K固定，$O(log n)$ 删除第K大

如果K变化，设相邻两次K的差值为Dif，则 $O((Dif+1) * log n)$ 删除第K大
## 内部行为
### 维护
当小根堆的大小小于k时，不断将大根堆堆顶元素取出并插入小根堆

当小根堆的大小大于k时，不断将小根堆堆顶元素取出并插入大根堆
### 插入
若插入的元素大于等于小根堆堆顶元素，则将其插入小根堆，然后维护对顶堆

否则将其插入大根堆
### 查询第K大
若K变化先维护对顶堆

小根堆堆顶
### 删除第K大
若K变化先维护对顶堆

删除小根堆对顶，然后维护对顶堆
## 中位数示例
```cpp
struct MedianFinder
{
    priority_queue<int> max_h;
    priority_queue<int, vector<int>, greater<int>> min_h;
    void insert(int num)
    {
        max_h.push(num);
        min_h.push(max_h.top());
        max_h.pop();
        if (min_h.size() == max_h.size())
            return;
        max_h.push(min_h.top());
        min_h.pop();
    }
    int findMedian()
    {
        return max_h.top();
    }
};
```