```c++
const int N=1e5+3;
struct ST
{
    int n;
    ll sum[N<<2],lazy[N<<2];
    void pushup(int id)
    {
        sum[id]=sum[id<<1]+sum[id<<1|1];
    }
    void pushdown(int id,int ln,int rn)
    {
        if(!lazy[id])
            return;
        lazy[id<<1]+=lazy[id];
        lazy[id<<1|1]+=lazy[id];
        sum[id<<1]+=lazy[id]*ln;
        sum[id<<1|1]+=lazy[id]*rn;
        lazy[id]=0;
    }
    void build(int l,int r,int id)
    {
        if(l==r)
        {
            sum[id]=a[l];
            return;
        }
        int mid=(l+r)>>1;
        build(l,mid,id<<1);
        build(mid+1,r,id<<1|1);
        pushup(id);
    }
    void update(int l,int r,int id,int pos,int val)
    {
        if(l==r)
        {
            sum[id]+=val;
            return;
        }
        int mid=(l+r)>>1;
        if(pos<=mid)
            update(l,mid,id<<1,pos,val);
        else
            update(mid+1,r,id<<1|1,pos,val);
        pushup(id);
    }
    void update(int l,int r,int id,int L,int R,int val)
    {
        if(L<=l && r<=R)
        {
            sum[id]+=val*(r-l+1);
            lazy[id]+=val;
            return;
        }
        int mid=(l+r)>>1;
        pushdown(id,mid-l+1,r-mid);
        if(L<=mid)
            update(l,mid,id<<1,L,R,val);
        if(R>mid)
            update(mid+1,r,id<<1|1,L,R,val);
        pushup(id);
    }
    ll query(int l,int r,int id,int L,int R)
    {
        if(L<=l && r<=R)
            return sum[id];
        int mid=(l+r)>>1;
        pushdown(id,mid-l+1,r-mid);
        ll res=0;
        if(L<=mid)
            res+=query(l,mid,id<<1,L,R);
        if(R>mid)
            res+=query(mid+1,r,id<<1|1,L,R);
        return res;
    }
    void init(int n)
    {
        this->n=n;
        memset(sum,0,sizeof(sum[0])*(n<<2));
        memset(lazy,0,sizeof(lazy[0])*(n<<2));
        build(1,n,1);
    }
    void update(int pos,int val)
    {
        update(1,n,1,pos,val);
    }
    void update(int l,int r,int val)
    {
        update(1,n,1,l,r,val);
    }
    ll query(int l,int r)
    {
        return query(1,n,1,l,r);
    }
}st;
st.init(n);
st.update(pos,val);
st.update(l,r,val);
st.query(l,r);
```
[hdu1166](https://acm.dingbacode.com/showproblem.php?pid=1166)单点加法，区间和

[hdu1754](https://acm.dingbacode.com/showproblem.php?pid=1754)单点变值，区间最大值

[poj3468](http://poj.org/problem?id=3468)区间加法，区间和

[poj2528](http://poj.org/problem?id=2528)区间变值，区间值的个数

[hdu1698](https://acm.dingbacode.com/showproblem.php?pid=1698)区间变值，区间和

[poj3264](http://poj.org/problem?id=3264)区间最大值最小值之差

[hdu4027](https://acm.dingbacode.com/showproblem.php?pid=4027)区间变为原值平方根，区间和