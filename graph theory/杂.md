#! https://zhuanlan.zhihu.com/p/563144861
# 图论杂
当贡献只和其祖先有关，且离线，可以dfs处理，经过该点就加上该点贡献，回溯时撤销该点贡献
# 图上三元环计数
首先要对所有的无向边进行定向，

对于任何一条边，从度数大的点连向度数小的点，如果度数相同，从编号小的点连向编号大的点

此时这张图是一个有向无环图

之后枚举每一个点u，然后将u的所有相邻的点都标记上“被u访问了”，

然后再枚举u的相邻的点v，然后再枚举v的相邻的点w，

如果w存在“被u访问了”的标记，那么(u,v,w)就是一个三元环了
## 时间复杂度
$O(m\sqrt m)$
# 无根树种类数
任意选取图中某个点为根，均可将无根树转化成为有根树。

$n$ 个点，组成的无根树有 $n^{n-2}$ 种
# 图上随意行走的路径总数
图是矩阵，有边是1，无边是0，矩阵快速幂，矩阵所有数字的和就是路径总数
# 完全图删边求连通块数
找删边最少点，它和周围连通一下，在连通块之外的点只有m/n个点，每个点最多n-1条边，所以是 $O(m)$
# 环本质不同的拆分
在一个长度为 n 的环上，每次跳 k 步，所经过的所有结点的集合就是从该结点出发每次跳gcd(n,k) 步，所到达的所有节点集合。
# 前后缀优化建图，线段树优化建图
# [稀疏图的补图最短路](http://acm.hdu.edu.cn/showproblem.php?pid=5876)
对稀疏图“类bfs”，维护两个unordered_set，里面的点都是尚未知道距离的点，其中一个set满足和当前点不邻接，另一个set满足和当前点邻接

维护：做bfs的时候，遍历当前点u所连的点v，若v在set中，则将这些点移动到另外一个集合。那么操作后剩下的点就是与当前点直接相连的了